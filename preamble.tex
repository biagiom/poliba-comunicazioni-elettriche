% lingua
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[italian]{babel}
\usepackage[babel]{csquotes}

\usepackage[mark]{gitinfo2}

% ambienti math
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{thmtools}

% unit√† di misura
\usepackage[binary-units]{siunitx}
\sisetup{per-mode=symbol,inter-unit-product=\ensuremath{{}\cdot{}}}
\DeclareSIUnit\dBm{dBm}

% indici acronimi bibliografia
\usepackage{makeidx}
%\usepackage[backend=biber]{biblatex}
\usepackage{multicol}
\usepackage{acronym}

% diagrammi circuiti elettrici
\usepackage[siunitx]{circuitikz}

% grafica
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{pgfplots,pgfplotstable}
\pgfplotsset{compat=1.12,/tikz/prefix=plots/}
\usetikzlibrary{math,matrix,chains}
\usetikzlibrary{scopes,positioning,fit,intersections}
\usetikzlibrary{angles,shapes,arrows,patterns,fadings}
\usetikzlibrary{decorations.pathreplacing,decorations.pathmorphing,decorations.markings,decorations.shapes}
\usepgfplotslibrary{fillbetween,patchplots}
\pgfplotsset{every linear axis/.append style={axis lines=middle,no markers,enlargelimits}}
\pgfplotsset{trig format plots=rad}
\pgfplotsset{/pgfplots/colormap={graywhite}{gray=(0.75) gray=(1.0)}}
%\usetikzlibrary{external}
%\tikzexternalize[prefix=plots/]

% icone creative commons
\usepackage{ccicons}

% float and figure
\usepackage{float}
\usepackage{subfig}
\usepackage{caption}
\captionsetup{tableposition=top,figureposition=bottom,font=small,format=hang}
\usepackage{booktabs}
\usepackage{tablefootnote}
\renewcommand{\thefootnote}{\fnsymbol{footnote}}

% hyperlink
\usepackage{hyperref}
\hypersetup{
	pdfauthor={Marco Salvatore Vanadia},
	pdftitle={Appunti di Comunicazioni Elettriche},
	pdfsubject={Modulo Teoria dei Segnali e Modulo Fondamenti di Telecomunicazioni},
	pdfencoding=auto,
	psdextra,
	colorlinks,
	linkcolor={black},
	citecolor={blue!50!black},
	urlcolor={blue!80!black}
}


% definizioni nuovi stili teoremi
\theoremstyle{definition}
\newtheorem{definizione}{Definizione}[chapter]
\newtheorem{esempio}{Esempio}[chapter]
\newtheorem{esercizio}{Esercizio}[chapter]
\newtheorem{nota}{Nota}[chapter]
\newcommand{\keyword}[2][]{\textsc{#2}\index{#1}}

% operatori matematici
\DeclareMathOperator{\Sen}{sen}
\DeclareMathOperator{\Cos}{cos}
\DeclareMathOperator{\Sinc}{sinc}
\DeclareMathOperator{\senh}{senh}
\DeclareMathOperator{\tg}{tg}
\DeclareMathOperator{\arctg}{arctg}
\DeclareMathOperator{\arcsen}{arcsen}
\DeclareMathOperator{\Arg}{Arg}
\DeclareMathOperator{\Log}{log_{10}}
\DeclareMathOperator{\Exp}{e}
\DeclareMathOperator{\Esp}{\mathsf{E}}
\DeclareMathOperator{\impulse}{\delta}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\step}{u}
\DeclareMathOperator{\ramp}{r}
\DeclareMathOperator{\pramp}{p}
\DeclareMathOperator{\Rect}{rect}
\DeclareMathOperator{\Laplace}{\mathcal{L}}
\DeclareMathOperator{\Fourier}{\mathcal{F}}
\DeclareMathOperator{\Erf}{erf}
\DeclareMathOperator{\Erfc}{erfc}

\DeclareMathOperator{\Realpart}{Re}
\DeclareMathOperator{\Imaginarypart}{Im}
\DeclareMathOperator{\Imaginary}{\mathit{j}\!}
%\DeclareMathOperator{\Imaginary}{\jmath}


% nuovi comandi
\newcommand{\eqname}[1]{\tag*{#1}}
\newcommand*{\f}[3][]{\,{#2}^{#1}\!\left({#3}\right)}
\newcommand*{\erf}[1]{\f{\Erf}{#1}}
\newcommand*{\erfc}[1]{\f{\Erfc}{#1}}
\newcommand*{\sen}[2][]{\f[#1]{\Sen}{#2}}
\renewcommand*{\cos}[2][]{\f[#1]{\Cos}{#2}}
\newcommand*{\sinc}[1]{\f{\Sinc}{#1}}
\renewcommand*{\P}[1]{\f{P}{#1}}
\newcommand*{\rect}[1]{\f{\Rect}{#1}}
\newcommand*{\E}[1]{\,{\Esp}\!\left[{#1}\right]}
\newcommand*{\e}[1]{\Exp^{#1}}
\newcommand*{\abs}[1]{\left|{#1}\right|}
\newcommand*{\norma}[1]{\lVert{#1}\rVert}
\newcommand*{\trasp}[1]{{#1}^\mathsf{T}}
\newcommand*{\conj}[1]{{#1}^\ast}
\renewcommand{\Re}[1]{\Realpart\!\left\lbrace{#1}\right\rbrace}
\renewcommand{\Im}[1]{\Imaginarypart\!\left\lbrace{#1}\right\rbrace}
\renewcommand{\imath}{\Imaginary}

\newcommand*{\tc}{\;\;\textrm{t.c.}\;\;}
\newcommand*{\intd}[4]{\int\limits_{#1}^{#2}{#3}{\,\diff{#4}}}
\newcommand*{\intinf}[2]{\int\limits_{-\infty}^{+\infty}{#1}{\,\diff{#2}}}
%\newcommand*{\restrict}[2]{{#1}\bigg|_{#2}}
\newcommand*{\restrict}[2]{\left.{#1}\right\rvert_{#2}}
\newcommand*{\bound}[3]{\left.\left[#3\right]\right\rvert_{#1}^{#2}}

\newcommand*\diff{\mathop{}\!\mathrm{d}}
\providecommand*{\deriv}[3][]{\dfrac{\diff^{#1}#2}{\diff #3^{#1}}}
\providecommand*{\pderiv}[3][]{\frac{\partial^{#1}#2}{\partial #3^{#1}}}
\providecommand*{\Deriv}[2][]{\mathop{}\!\mathrm{D}^{#1}#2}

\providecommand*{\fourier}[1]{\Fourier\!\left\lbrace{#1}\right\rbrace}

% alternativa a \bar e \overline
\newcommand{\overbar}[1]{\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu}
\newcommand{\vect}[1]{{\overbar{{#1}}}}

% simboli per insiemi numerici
\newcommand{\numberset}{\mathbb}
\newcommand{\N}{\numberset{N}}
\newcommand{\Z}{\numberset{Z}}
\newcommand{\R}{\numberset{R}}
%\newcommand{\Q}{\numberset{Q}}
%\newcommand{\C}{\numberset{C}}

% sostituzione simboli greci americani con europei
\renewcommand{\rho}{\varrho}
\renewcommand{\phi}{\varphi}
\renewcommand{\theta}{\vartheta}
\renewcommand{\epsilon}{\varepsilon}

% definizione blocchi diagrammi
\tikzstyle{block} = [draw, thick, fill=white, rectangle, minimum height=3em, minimum width=4em]
\tikzstyle{sum} = 	[draw, thick, fill=white, circle, minimum width=5mm]
\tikzstyle{mult} =	[draw, thick, fill=white, circle, minimum width=5mm, cross]
\tikzstyle{fitted} =	[draw, thick, dotted, inner sep=4mm, rounded corners]

\tikzstyle{passabasso}=	[block, path picture={
	\draw [<->] (-16pt, 12pt)--(-16pt,-12pt)--(18pt,-12pt);
	\draw (-16pt,5pt)-|(10pt,-12pt);
}]
\tikzstyle{passabanda}=	[block, path picture={
	\draw [<->] (-16pt, 12pt)--(-16pt,-12pt)--(18pt,-12pt);
	\draw (-8pt,-12pt)--(-8pt,5pt)-|(10pt,-12pt);
}]
\tikzstyle{decisore}=	[block, path picture={
	\draw [->] (-16pt, 0pt)--(16pt,0pt);
	\draw [->] (0pt,-12pt)--(0pt,12pt);
	\draw [thick] (-16pt,-8pt)--(0pt,-8pt)|-(16pt,8pt);
}]
\tikzstyle{campionatore} = [block, draw=none, minimum width=3em, path picture={
	\draw(path picture bounding box.west)-- ++(30:12mm);
	\draw[<-](path picture bounding box.west)++(8mm,0)arc(0:60:8mm);
}]
\tikzstyle{sumpic}=	[draw, thick, circle, node distance=1cm, path picture={
	\draw[black](path picture bounding box.south)--(path picture bounding box.north)(path picture bounding box.west)--(path picture bounding box.east);
}]
\tikzstyle{cross} = [path picture={
	\draw[black](path picture bounding box.south east)--(path picture bounding box.north west)(path picture bounding box.south west)--(path picture bounding box.north east);
}]
\tikzstyle{clock} = [path picture={
	\draw[black](path picture bounding box.south east)--(path picture bounding box.east)--(path picture bounding box.center)--(path picture bounding box.south)--(path picture bounding box.south west)--(path picture bounding box.west);
}]
\tikzstyle{dot}=	[thick,decorate,decoration={markings,mark connection node=dot,
	mark=at position 0.5 with{%
		\node[transform shape,inner sep=0pt](dot){}[fill]circle(2pt) node[below]{#1};},
	mark=at position 1 with{%
		\arrow{latex}}
}]
\tikzstyle{section}=[thick,decorate,decoration={markings,
	mark connection node=sect,
	mark=at position 0.5 with {%
		\node (sect) [transform shape,rotate=-90,minimum width=20pt,minimum height=3pt,draw=none] {};
		\draw [thin,dashed] ($(sect.north)+(0,-20pt)$)node[below]{#1} -- ($(sect.north)+(0,20pt)$);
	},
	mark=at position 1 with{%
		\arrow{latex'}}
}]
\tikzset{
	arcnode/.style 2 args={
	decoration={
		raise=#1,
		markings,
		mark=at position 0.5 with {
			\node[inner sep=0] {#2};
		}
	},
	postaction={decorate}
}}
% picture diagrammi
\tikzset{
	pics/carc/.style args={#1:#2:#3:#4}{
		code={
			\draw[pic actions,arcnode={-10pt}{\tiny #4}] (#1:#3) arc(#1:#2:#3);
		}
	}
}
\tikzset{
	antenna/.pic={
	\draw[thick](0,0)--(.5,0)arc(180:160:4)(.5,0)arc(180:200:4)(.5,.25)--(1,0)--(.5,-.25);
	\draw[decorate,decoration={expanding waves,angle=30}](1,0)--(3,0);
}}
\tikzset{
	antennarx/.pic={
		\draw[thick](0,0)--(.5,0)arc(180:160:4)(.5,0)arc(180:200:4)(.5,.25)--(1,0)--(.5,-.25);
		\draw[decorate,decoration={expanding waves,angle=30,amplitude=30}](3,0)--(1,0);
}}
\tikzset{antennabase/.pic={\pic{antenna}--++(0,-.5)--++(-.5,-1)++(.5,1)--++(.5,-1)++(-.5,0)node[below]{#1};}}

% definizione funzione pgfplots
\newcommand{\eval}[1]{\pgfmathparse{#1}\pgfmathresult}
% gradino #1=t #2=t0
\pgfmathdeclarefunction{grad}{2}{%
	\pgfmathparse{(#1)<=(#2))?0.:1.}%
}

% impulso rettangolare singolo #1=t #2=T
\pgfmathdeclarefunction{imp}{2}{%
	\pgfmathparse{(abs(#1)<=(#2/2))?1.:0.}%
}
% impulso triangolare #1=t #2=T
\pgfmathdeclarefunction{tri}{2}{%
	\pgfmathparse{(abs(#1)<=(#2))?1-abs(#1)/#2:0.}%
}
% impulso rettangolare #1=t #2=a #3=b
\pgfmathdeclarefunction{rect}{3}{%
	\pgfmathparse{(#1<#2)||(#1>#3)?0.:1.}%
}
% rampa #1=t #2=tmin #3=tmax
\pgfmathdeclarefunction{ramp}{3}{%
	\pgfmathparse{(#1<#2)?0.0:((#1>#3)?1.0:(#1-#2)/(#3-#2))}%
}
% impulso seno cardinale #1=f #2=T
\pgfmathdeclarefunction{sinc}{2}{%
	\pgfmathparse{sin(pi*(#2)*(#1))/(pi*(#2)*(#1))}%
}
% gauss #1=x #2=\mu #3=\sigma^2
\pgfmathdeclarefunction{gauss}{3}{%
	\pgfmathparse{1/(#3*sqrt(2*pi))*exp(-((#1-#2)^2)/(2*#3^2))}%
}
% noise
\pgfmathdeclarefunction{noise}{2}{%
	\pgfmathparse{#1+rand*#2}%
}
% Nyquist
\pgfmathdeclarefunction{nyquist}{4}{%
	\pgfmathparse{(#1<#4)?0.0:((#1>#2)?1.0:(.5*(1+cos((pi*(abs(#1)-#4)/(2*#3))))))}%
}

% random decoration
\pgfdeclaredecoration{random}{step}
{
	\state{step}[width=+\pgfdecorationsegmentlength]
	{ 	\pgfmathsetmacro{\delta}{rand*\pgfdecorationsegmentamplitude}
		\pgfmathsetmacro{\deltax}{\delta*cos(90+\pgfdecoratedangle)}
		\pgfmathsetmacro{\deltay}{\delta*sin(90+\pgfdecoratedangle)}
		\pgfpathlineto{\pgfpoint{\pgfdecorationsegmentlength-\deltax}{\deltay}}
	}
	\state{final}
	{
		\pgfpathlineto{\pgfpointdecoratedpathlast}
	}
}
% clear page
\makeatletter
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
	\hbox{}
	\vspace*{\fill}
	\begin{center}
	\end{center}
	\vspace{\fill}
	\thispagestyle{empty}
	\newpage
	\if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother

\pgfdeclarepatternformonly[/tikz/radius,\thickness,\size]{rings}
{\pgfpoint{-0.5*\size}{-0.5*\size}}
{\pgfpoint{0.5*\size}{0.5*\size}}
{\pgfpoint{\size}{\size}}
{
	\pgfsetlinewidth{\thickness}
	\pgfpathcircle\pgfpointorigin{\pgfkeysvalueof{/tikz/radius}}
	\pgfusepath{stroke}
}
\newdimen\thickness
\tikzset{
	radius/.initial=4pt,
	size/.store in=\size, size=20pt,
	thickness/.code={\thickness=#1},
	thickness=0.75pt
}